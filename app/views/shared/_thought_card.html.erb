<article class="thought-card group">
  <%= link_to thought_path(thought), class: "flex gap-3 p-4 -mx-2 rounded-2xl hover:bg-white dark:hover:bg-zinc-900/50 transition-all duration-200" do %>
    <!-- Avatar -->
    <div class="shrink-0">
      <%= image_tag "https://swm.cc/profile.svg",
          class: "w-10 h-10 rounded-full bg-white dark:bg-zinc-900",
          alt: "swmcc" %>
    </div>

    <!-- Content -->
    <div class="flex-1 min-w-0">
      <div class="flex items-center gap-1">
        <span class="text-[15px] font-semibold text-zinc-900 dark:text-white">swmcc</span>
        <span class="text-xs text-zinc-400 dark:text-zinc-600">·</span>
        <span title="<%= thought.source_label %>" class="text-zinc-400 dark:text-zinc-500 cursor-help">
          <%= render "shared/source_icon", source: thought.source %>
        </span>
        <span class="text-xs text-zinc-400 dark:text-zinc-600">·</span>
        <time datetime="<%= thought.created_at.iso8601 %>" class="text-xs text-zinc-500 dark:text-zinc-500">
          <%= smart_time(thought.created_at) %>
        </time>
      </div>

      <p class="mt-1 text-[15px] text-zinc-800 dark:text-zinc-200 leading-relaxed">
        <%= thought.content %>
      </p>

      <% if thought.link_url.present? %>
        <div class="mt-3 rounded-xl border border-zinc-200 dark:border-zinc-700 overflow-hidden hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors">
          <% if thought.link_image.present? %>
            <div class="aspect-[2/1] bg-zinc-100 dark:bg-zinc-800">
              <%= image_tag thought.link_image, class: "w-full h-full object-cover", alt: thought.link_title %>
            </div>
          <% end %>
          <div class="p-3">
            <p class="text-xs text-zinc-500 dark:text-zinc-400 truncate"><%= URI.parse(thought.link_url).host rescue thought.link_url %></p>
            <% if thought.link_title.present? %>
              <p class="text-sm font-medium text-zinc-900 dark:text-white truncate"><%= thought.link_title %></p>
            <% end %>
            <% if thought.link_description.present? %>
              <p class="text-xs text-zinc-500 dark:text-zinc-400 line-clamp-2 mt-0.5"><%= thought.link_description %></p>
            <% end %>
          </div>
        </div>
      <% end %>

      <% if thought.tags.any? %>
        <div class="mt-2 text-sm">
          <% thought.tags.each_with_index do |tag, i| %>
            <span class="text-blue-500 dark:text-blue-400 hover:underline">#<%= tag %></span><% if i < thought.tags.length - 1 %> <% end %>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>
</article>
